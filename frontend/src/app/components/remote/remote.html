<div class="remote-container">
  <!-- Header with mini countdown (matching main view style) -->
  <header class="header">
    @if (!is_celebrating()) {
      <div class="countdown-grid">
        <div class="time-block">
          <div class="time-value">{{ days_display() }}</div>
          <div class="time-label">Days</div>
        </div>
        <div class="separator">:</div>
        <div class="time-block">
          <div class="time-value">{{ hours_display() }}</div>
          <div class="time-label">Hours</div>
        </div>
        <div class="separator">:</div>
        <div class="time-block">
          <div class="time-value">{{ minutes_display() }}</div>
          <div class="time-label">Min</div>
        </div>
        <div class="separator">:</div>
        <div class="time-block">
          <div class="time-value">{{ seconds_display() }}</div>
          <div class="time-label">Sec</div>
        </div>
      </div>
    } @else {
      <div class="celebrating-text">ğŸ‰ HAPPY NEW YEAR! ğŸ‰</div>
    }
    <div class="connection-status" [attr.data-status]="sync_status()">
      @switch (sync_status()) {
        @case ('synced') {
          <span class="status-dot synced"></span> Synced
        }
        @case ('connected') {
          <span class="status-dot connected"></span> Connected
        }
        @case ('cached') {
          <span class="status-dot cached"></span> Cached
        }
        @default {
          <span class="status-dot offline"></span> Offline
        }
      }
    </div>
  </header>

  <!-- Emoji Grid -->
  <section class="emoji-section">
    <h2 class="section-title">Send to the World ğŸŒ</h2>
    <div class="emoji-grid">
      @for (emoji of emojis; track emoji) {
        <button
          class="emoji-btn"
          [class.sent]="last_sent_emoji() === emoji"
          [disabled]="!is_connected() || reaction_service.is_sending()"
          (click)="send_emoji(emoji)"
        >
          {{ emoji }}
        </button>
      }
    </div>
    <div class="broadcast-hint" [class.active]="show_broadcast_feedback()">
      @if (show_broadcast_feedback()) {
        <span class="broadcast-text">ğŸŒ Broadcast!</span>
      } @else {
        <span class="hint-text">appears on all screens worldwide</span>
      }
    </div>
  </section>

  <!-- Greeting Section -->
  <section class="greeting-section">
    <h2 class="section-title">Share Your Greetings ğŸ’¬</h2>

    <!-- Template selector -->
    <div class="template-selector">
      <button class="template-btn" (click)="cycle_template()">
        <span class="template-preview">{{ greeting_templates[selected_template()] }}</span>
        <span class="template-hint">Tap to change</span>
      </button>
    </div>

    <!-- Send button -->
    <button
      class="greeting-btn"
      [disabled]="
        !is_connected() ||
        greeting_service.is_sending() ||
        greeting_service.is_locating() ||
        !greeting_service.is_geolocation_available
      "
      (click)="send_greeting()"
    >
      @if (greeting_service.is_locating()) {
        <span class="btn-icon">ğŸ“</span> Getting location...
      } @else if (greeting_service.is_sending()) {
        <span class="btn-icon">âœ¨</span> Sending...
      } @else if (greeting_service.last_location()) {
        <span class="btn-icon">ğŸŒ</span> Send from {{ greeting_service.last_location() }}
      } @else {
        <span class="btn-icon">ğŸŒ</span> Share Your Location
      }
    </button>

    @if (greeting_service.geolocation_error()) {
      <div class="error-message">
        {{ greeting_service.geolocation_error() }}
      </div>
    }
  </section>

  <!-- Footer -->
  <footer class="footer">
    <p class="footer-text">
      ğŸ† Countdown to {{ target_year() }} ğŸ†
    </p>
    <div class="legal-links">
      @if (imprint_url()) {
        <a class="legal-link" [href]="imprint_url()" target="_blank" rel="noopener">Impressum</a>
      }
      @if (privacy_url()) {
        <a class="legal-link" [href]="privacy_url()" target="_blank" rel="noopener">Datenschutz</a>
      }
    </div>
  </footer>
</div>

